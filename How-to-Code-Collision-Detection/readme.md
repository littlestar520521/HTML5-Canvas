# 编写代码实现碰撞检测

## 学习内容

1. 通过计算两点间距离判断物体是否碰撞
2. 在图形生成阶段，确保它们彼此不重叠
3. 弹性碰撞中计算物体碰撞之后的速度

## 理论原理

两个物体弹性碰撞之前的速度设为u1、u2，碰撞之后的速度设为v1、v2

* 动量守恒

!['动能守恒'](/assets/c96b4cc0e7b609b53b3b03c33297c7ef6d03cbd9.svg)

* 动能守恒

!['动能守恒'](/assets/344330d4e62d3d8e1f79c7969aad8b33cfbddbd3.svg)

由以上两条基本定理可进行推导：

    1.  第一个等式两边同时除以m1，第二个等式两边同时除以m1/2
    2.  进行移位，使第一个等式左边变为u1-v1，第二个等式左边变为u1^2-u2^2
    3.  第二个等式使用平方差公式展开，两边同时除以u1+v1，使等式左边变为u1-v1
    4.  第2个步骤中得到的等式1与第3个步骤中得到的等式2联立，消去m2(v2-u2)/m1可得v2+u2=v1+u1
    5.  第4个步骤中得到的v1=v2+u2-u1，v2=v1+u1-u2代入原始的动量守恒定律等式，整理可得2(m1u1+m2u2)=m1(v2+u2)+m2(v1+u1)，即2(m1u1+m2u2)=(m1+m2)(v1+u1)，化简可计算出v1，同理可计算出v2，最终计算结果如下：

!['计算碰撞之后的速度'](/assets/8703800c3e0f653458fc01982b475f4f51b26bca.svg)

当两个物体质量相等，即m1=m2时，碰撞之后的速度大小为v1=u2，v2=u1，也就是与碰撞之前的速度交换
